(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7986,4726],{40127:function(){},27790:function(){},75992:function(){},78110:function(){},52361:function(){},94616:function(){},88924:function(){},92821:function(e,t,n){"use strict";n.d(t,{A:function(){return y},H:function(){return N}});var a=n(57437),s=n(2265),l=n(68768),r=n(39502),i=n(38217),o=n(68651),d=n(82587),u=n(44406),c=n(25904),m=n(64726),g=n(24461),h=n(91960),p=n(563),f=n(58863),x=n(46454),b=n(67441),v=n(33730),w=n(29557),j=n(5503);let N=18,y=e=>{let{address:t,setShowModal:n}=e,{data:y}=(0,i.useWalletClient)(),{balance:_}=(0,x.Z_)(),C=(0,h.TL)(),D=(0,g.Xq)(),A=(0,s.useRef)(null),S=(0,s.useRef)(null),{chainId:k,address:T}=(0,v.Z)(),E=(0,j.Y)(t,T),{actions:{App:{setWalletConnectChainId:L}},store:{CoinEntity:{coins:{entangle:{price:I}}}},asyncActions:{Tokenomics:{getTokensSupply:F,getBondedTokens:U},Coin:{getPrice:P}}}=(0,h.oR)(e=>({App:e.AppEntity,CoinEntity:e.CoinEntity,Validator:e.ValidatorEntity,TokenomicsEntity:e.TokenomicsEntity})),[R,B]=(0,s.useState)(d.SP.Delegate),[M,Z]=(0,s.useState)({price:f.w,value:f.z}),[G,$]=(0,s.useState)(!1),[V,W]=(0,s.useState)(!1),[q,H]=(0,s.useState)(!1),O=(0,s.useMemo)(()=>k===w.ZP.chainId&&E?E.delegated:"0",[k,E]),J=!!y,K=()=>{n(!1)},z=async()=>{y&&await y.request({method:"wallet_addEthereumChain",params:[b.oI]})},Y=async e=>{let{delegateAmount:t}=e;if(_&&A.current&&E&&y){z();try{$(!0);let e=new o.Z(_),n=new o.Z(t);if(!e||!n||e.minus(1).isLessThan(n))return A.current.setDelegateAmountError(u.lK);let a=new c.Z(y),s=await a.delegate(E.address,(0,l.v)(n.toString(),N).toString());if(0!==s.tx_response.code)throw Error(JSON.stringify(s));D({title:u.wn.SUCCESS.title,type:u.wn.SUCCESS.type,message:u.uu.DELEGATE}),K()}catch(e){console.debug("error18",e),A.current.setDelegateAmountError(u.LJ)}finally{$(!1)}}},Q=async e=>{let{undelegateAmount:t}=e;if(S.current&&E&&y){z();try{W(!0);let e=new o.Z(O),n=new o.Z(t);if(!e||!n||e.isLessThan(n))return S.current.setUndelegateAmountError(u.lK);let a=new c.Z(y),s=await a.undelegate(E.address,(0,l.v)(n.toString(),N).toString());if(0!==s.tx_response.code)throw Error(JSON.stringify(s));D({title:u.wn.SUCCESS.title,type:u.wn.SUCCESS.type,message:u.uu.UNDELEGATE}),K()}catch(e){console.debug("error17",e),S.current.setUndelegateAmountError(u.LJ)}finally{W(!1)}}},X=async()=>{if(!I||!y)return;z();let e=new c.Z(y),t=await e.getRewards(),n=(0,r.b)(BigInt(new o.Z(t.total.find(e=>{let{denom:t}=e;return"aNGL"===t})?.amount?.toString()||"0").toFixed(0).toString()),N).toString(),a=new o.Z(n).multipliedBy(I).toString();Z({value:(0,p.I)(n||"0"),price:(0,p.I)(a)})},ee=async()=>{try{if(H(!0),!y||!E)return;z();let e=new c.Z(y),t=await e.withdrawRewards(E.address);if(0!==t.tx_response.code)throw Error(JSON.stringify(t));D({title:u.wn.SUCCESS.title,type:u.wn.SUCCESS.type,message:u.uu.REWARDS_CLAIMED})}catch(e){console.debug("error16",e)}finally{X(),H(!1)}};if((0,s.useEffect)(()=>{C(F()),C(U()),C(P("entangle"))},[]),(0,s.useEffect)(()=>{J&&I&&setInterval(()=>{let e=X();return()=>clearInterval(e)},3e3)},[J,I]),!E)return null;let et={entity:{avatarUrl:E?.avatarUrl,sharedRewardPercent:E?.commission,name:E?.name},balance:(0,p.I)(_??f.z),currentlyDelegated:O,onWalletConnect:e=>{e.preventDefault(),J||C(L(w.ZP.chainId))},isAuthenticated:J,price:I,entityName:"Validator"};return(0,a.jsx)(m.M,{enable:!!E,activeTab:R,onTabSelect:e=>()=>{B(e)},commonFormProps:et,onClose:K,delegateDisabled:G,delegateFormRef:A,delegateRewardsPercent:`${E?.apr}%`,delegateRewardsPercentName:"APR",onDelegateFormSubmit:Y,delegateSubmitButtonName:"Delegate",undelegateFormRef:S,undelegateDisabled:V,onUndelegateFormSubmit:Q,undelegateRewards:M,undelegateOnClaimRewardsClick:ee,undelegateClaimRewardsDisabled:q})}},5826:function(e,t,n){"use strict";n.d(t,{F:function(){return c}});var a=n(57437),s=n(2265),l=n(92821),r=n(84155),i=n.n(r),o=n(36760),d=n.n(o);let u=e=>{let{className:t,setShowModal:n}=e,l=(0,s.useCallback)(e=>{e.stopPropagation(),n(!0)},[n]);return(0,a.jsx)("button",{className:d()(i().delegateButton,t),onClick:l,children:"Delegate"})},c=e=>{let{...t}=e,[n,r]=(0,s.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u,{setShowModal:r}),n?(0,a.jsx)(l.A,{address:t.address,setShowModal:r}):null]})}},89220:function(e,t,n){"use strict";n.d(t,{u:function(){return g}});var a,s,l=n(57437),r=n(46089),i=n.n(r),o=n(18434),d=n(41716),u=n(36760),c=n.n(u),m=n(50339);(a=s||(s={})).StrokeColor="#08DCCF",a.TrailColor="#012523";let g=e=>{let{votingPowerPercentage:t,votingPower:n,className:a,strokeColor:s,trailColor:r}=e,u=(0,m.a)(1024)?2:1,g=(0,d.z)(t);return t?(0,l.jsxs)("div",{className:c()(i().votingPowerColumnData,a),children:[(0,l.jsxs)("div",{className:i().votingPower,children:[(0,l.jsx)("div",{children:n}),(0,l.jsx)("div",{children:t})]}),(0,l.jsx)("div",{className:i().votingPowerChart,children:(0,l.jsx)(o.x1,{percent:g||0,strokeWidth:u,strokeColor:s||"#08DCCF",trailColor:r||"#012523",trailWidth:u})})]}):null}},5503:function(e,t,n){"use strict";n.d(t,{Y:function(){return l}});var a=n(2265),s=n(91960);let l=(e,t)=>{let n=(0,s.TL)(),{store:{Validator:{delegationValidators:l}},asyncActions:{Validator:{getFilteredDelegationValidators:r}}}=(0,s.oR)(e=>({Validator:e.ValidatorEntity}));return(0,a.useEffect)(()=>{e&&n(r({filters:{},sort:null,delegatorAddress:t}))},[e,t,n,r]),(0,a.useMemo)(()=>l.find(t=>t.address===e),[l,e])}},41716:function(e,t,n){"use strict";n.d(t,{z:function(){return a}});let a=e=>{let t=e.match(/[+-]?\d+(\.\d+)?/);return t?parseFloat(t[0]):null}},33730:function(e,t,n){"use strict";var a=n(2265),s=n(64707),l=n(1970),r=n(24377),i=n(91960),o=n(29557),d=n(99376),u=n(15150);t.Z=()=>{let{address:e,chainId:t,isConnected:n,status:c}=(0,s.useAccount)(),[m,g]=(0,a.useState)(void 0),h=(0,i.TL)(),{actions:{App:{setWalletConnectChainId:p}}}=(0,i.oR)(e=>({App:e.AppEntity})),{disconnect:f}=(0,l.useDisconnect)(),{connect:x,connectors:b}=(0,r.useConnect)(),{push:v}=(0,d.useRouter)(),w=(0,a.useCallback)(async(e,t)=>{try{if(console.log(b),"injected"===e&&!window.ethereum)return v(`https://metamask.app.link/dapp/${window.location.hostname}`);let n=b.find(t=>t.id===e);if(!n){console.error("connector not found");return}x({chainId:u.vL?void 0:t||o.ZP.chainId,connector:n})}catch(e){console.log("walletConnect error",e)}finally{h(p())}},[b,x,v,h,p]);return(0,a.useEffect)(()=>{if(!n)return g(void 0);g(e)},[e,n]),{address:m,disconnect:f,walletConnect:w,chainId:t,status:c}}},98786:function(e,t,n){"use strict";n.d(t,{m:function(){return l}});var a=n(24461),s=n(44406);let l=()=>{let e=(0,a.Xq)();return async t=>{try{await navigator.clipboard.writeText(t),e({title:s.wn.SUCCESS.title,type:s.wn.SUCCESS.type,message:s.uu.COPIED_TO_CLIPBOARD},5e3)}catch(e){console.error("Error:",e)}}}},25904:function(e,t,n){"use strict";var a=n(57228),s=n(61409),l=n(16612),r=n(46478),i=n(26820),o=n(97985),d=n(80373),u=n(75119),c=n(29557),m=n(12454),g=n(82957).Buffer;class h{constructor(e){this.chain={chainId:c.ZP.chainId,cosmosChainId:c.ZP.cosmosChainId},this.queryNodeUrl="https://cosmos.entangle.fi",this.wallet=e}async getUserData(){let e=await this.getUserAddress(),t=`${this.queryNodeUrl}${(0,l.T)(e)}`,n=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}}),a=await n.json(),s=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a="base_account";if(e?.[a])return console.log(`Found base_account at depth ${n}`),e[a];for(let a of Object.values(e))if("object"==typeof a&&null!==a&&(t=s(a,n+1)))break;return t};return s(a)}async getDelegatedAmount(){let e=await this.getUserAddress(),t=`${this.queryNodeUrl}${(0,s.$O)(e)}`,n=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});return await n.json()}async getValidators(){let e=`${this.queryNodeUrl}${(0,s.so)()}?pagination.limit=1415`,t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});return await t.json()}async getRewards(){let e=await this.getUserAddress(),t=`${this.queryNodeUrl}${(0,s.Hu)(e)}`,n=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});return await n.json()}async delegate(e,t){return this.sendTransaction({fn:r.iy,params:{validatorAddress:e,amount:t,denom:"aNGL"}})}async multipleDelegate(e){return this.sendTransaction({fn:r.cf,params:{values:e},fee:{amount:"400000000000000",denom:"aNGL",gas:"20000000"}})}async redelegate(e,t,n){return this.sendTransaction({fn:r.P8,params:{validatorSrcAddress:e,validatorDstAddress:t,denom:"aNGL",amount:n}})}async withdrawRewards(e){return this.sendTransaction({fn:r.AZ,params:{validatorAddress:e}})}async cancelUnbondingDelegation(e){return this.sendTransaction({fn:r.CI,params:e})}async withdrawMultipleRewards(e){return this.sendTransaction({fn:m.dJ,params:{validatorAddresses:e},fee:{amount:"400000000000000",denom:"aNGL",gas:"20000000"}})}async undelegate(e,t){return this.sendTransaction({fn:r.$7,params:{validatorAddress:e,amount:t,denom:"aNGL"}})}async sendTransaction(e){try{let{fn:t,params:n,fee:s={amount:"400000000000000",denom:"aNGL",gas:"500000"}}=e,{address:l,sequence:r,account_number:o}=await this.getUserData(),d=await this.getEthAddress(),u=await this.getUserPubKey(),c=t({chain:this.chain,sender:{accountAddress:l,sequence:+r,accountNumber:+o,pubkey:u},fee:s,memo:""},n),m=JSON.stringify(c.eipToSign),h=await this.wallet.request({method:"eth_signTypedData_v4",params:[d,m]}),p=g.from(h.replace("0x",""),"hex"),{signDirect:f}=c,x=f.body.toBinary(),b=f.authInfo.toBinary(),v=(0,i.KS)(x,b,[p]),w={method:"POST",headers:{"Content-Type":"application/json"},body:(0,a.Dr)(v)},j=`${this.queryNodeUrl}${(0,a.Q9)()}`,N=await fetch(j,w);return await N.json()}catch(e){console.log("send transaction",e)}}async getEthAddress(){let[e]=await this.wallet.getAddresses();return e}async getUserAddress(){let e=await this.getEthAddress();return(0,u.Rv)(e)}async getUserPubKey(){let e=await this.getEthAddress(),t="0x Verify Public Key",n=await this.wallet.request({method:"personal_sign",params:[t,e]}),a=(0,o.LO)((0,d.r)(t),n),s=(0,o.VW)(a,!0);return g.from(s.replace("0x",""),"hex").toString("base64")}}t.Z=h},46454:function(e,t,n){"use strict";n.d(t,{Z_:function(){return c},vP:function(){return u}});var a=n(57437),s=n(2265),l=n(64707),r=n(91167),i=n(90376),o=n(15150);let d=s.createContext({balance:void 0}),u=e=>{let{children:t}=e,{address:n}=(0,l.useAccount)(),{data:u,refetch:c}=(0,r.useBalance)({address:n});(0,s.useEffect)(()=>{let e=setInterval(()=>{(0,i.o)()&&c()},o.g_);return()=>clearInterval(e)},[c]);let m=(0,s.useMemo)(()=>({balance:u?.formatted}),[u]);return(0,a.jsx)(d.Provider,{value:m,children:t})},c=()=>(0,s.useContext)(d)},82587:function(e,t,n){"use strict";n.d(t,{ny:function(){return k},A5:function(){return u},SP:function(){return s},gr:function(){return F}});var a,s,l=n(57437),r=n(89906),i=n.n(r),o=n(36760),d=n.n(o);(a=s||(s={})).Delegate="delegate",a.UnDelegate="unDelegate";let u=e=>{let{activeTab:t,onTabSelect:n}=e;return(0,l.jsx)("div",{className:i().tabs,children:(0,l.jsxs)("ul",{className:i().tabsList,children:[(0,l.jsx)("li",{onClick:n("delegate"),className:d()(i().tabsListItem,{[i().active]:"delegate"===t}),children:(0,l.jsx)("h3",{children:"Delegate"})}),(0,l.jsx)("li",{className:d()(i().tabsListItem,{[i().active]:"unDelegate"===t}),onClick:n("unDelegate"),children:(0,l.jsx)("h3",{children:"Undelegate"})})]})})};var c=n(73842),m=n(68651),g=n(2265),h=n(29501),p=n(83540),f=n(58863),x=n(16240),b=n.n(x);let v=()=>(0,l.jsxs)("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M8.50004 14.6663C12.1819 14.6663 15.1667 11.6816 15.1667 7.99967C15.1667 4.31778 12.1819 1.33301 8.50004 1.33301C4.81814 1.33301 1.83337 4.31778 1.83337 7.99967C1.83337 11.6816 4.81814 14.6663 8.50004 14.6663Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M8.5 10.6667V8",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M8.5 5.33301H8.50667",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]}),w=()=>(0,l.jsxs)("div",{className:b().info,children:[(0,l.jsxs)("div",{className:d()(b().infoTitle,b().infoTitleError),children:[(0,l.jsx)(v,{color:"#08DCCF"}),(0,l.jsx)("h6",{children:"Insufficient EAI"})]}),(0,l.jsx)("div",{className:b().infoDescription,children:"Please ensure at least 0.001 EAI remains in your wallet to cover network fees."})]});var j=n(75188),N=n(44406);let y={delegateAmount:"0.00"},_=j.T.object().shape({delegateAmount:j.T.string().test("delegate-amount",N.N8,e=>{let t=Number(e);return!!e&&!!t&&t>0})}),C=()=>(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M12.6667 7.33301H3.33333C2.59695 7.33301 2 7.92996 2 8.66634V13.333C2 14.0694 2.59695 14.6663 3.33333 14.6663H12.6667C13.403 14.6663 14 14.0694 14 13.333V8.66634C14 7.92996 13.403 7.33301 12.6667 7.33301Z",stroke:"#F4A408",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M4.6665 7.33301V4.66634C4.6665 3.78229 5.01769 2.93444 5.64281 2.30932C6.26794 1.6842 7.11578 1.33301 7.99984 1.33301C8.88389 1.33301 9.73174 1.6842 10.3569 2.30932C10.982 2.93444 11.3332 3.78229 11.3332 4.66634V7.33301",stroke:"#F4A408",strokeLinecap:"round",strokeLinejoin:"round"})]});var D=n(5383),A=n(563),S=n(27648);let k=(0,g.forwardRef)((e,t)=>{let{balance:n,currentlyDelegated:a,onWalletConnect:s,isAuthenticated:r,price:i,onFormSubmit:o,rewardsPercentName:u,rewardsPercent:x,entityName:v,entity:j,submitButtonName:k,disabled:T}=e,[E,L]=(0,g.useState)(f.w),{control:I,handleSubmit:F,setError:U,setValue:P,watch:R,formState:{errors:B},reset:M}=(0,h.cI)({defaultValues:y,resolver:(0,c.X)(_)}),Z=R("delegateAmount"),{avatarUrl:G,sharedRewardPercent:$,name:V}=j,W=e=>U("delegateAmount",{message:e}),q=()=>{n&&P("delegateAmount",n)},H=()=>L(Number(Z)?(0,A.I)(new m.Z(Z).multipliedBy(i).toString()):f.w),O=e=>{"value"in e.target&&e.target.value===y.delegateAmount&&P("delegateAmount","")};return(0,g.useImperativeHandle)(t,()=>({setDelegateAmountError:W,setError:U,reset:M})),(0,g.useEffect)(()=>{i&&H()},[i,Z]),(0,l.jsxs)("form",{className:b().form,onSubmit:r?F(o):s,children:[(0,l.jsxs)("div",{className:b().onChainInfo,children:[(0,l.jsxs)("div",{className:b().onChainInputGroup,children:[(0,l.jsx)("label",{htmlFor:"Available",className:d()("block text-sm font-medium leading-6",b().inputLabel,b().onChainLabel),children:"Agent"==v?"Available $WNGL to delegate:":"Available $EAI to delegate:"}),(0,l.jsx)("div",{className:"mt-2 rounded-md shadow-sm",children:(0,l.jsx)("input",{type:"text",name:"Available",className:d()("block w-full rounded-md border-none",b().input,b().onChainInput),disabled:!0,value:n})})]}),(0,l.jsxs)("div",{className:b().onChainInputGroup,children:[(0,l.jsx)("label",{htmlFor:"currentlyDelegated",className:d()("block text-sm font-medium leading-6",b().inputLabel,b().onChainLabel),children:"Currently Delegated:"}),(0,l.jsx)("div",{className:"mt-2 rounded-md shadow-sm",children:(0,l.jsx)("input",{type:"text",name:"currentlyDelegated",className:d()("block w-full rounded-md border-none",b().input,b().onChainInput),readOnly:!0,value:a})})]})]}),(0,l.jsx)("div",{className:d()(b().spacing)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:v,className:d()("block text-sm font-medium leading-6",b().inputLabel),children:v}),(0,l.jsxs)("div",{className:"relative mt-2 rounded-md shadow-sm",children:[(0,l.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:G&&(0,l.jsx)("img",{className:b().delegateAvatarUrl,src:G,alt:`${v} Icon`})}),(0,l.jsx)("input",{type:"text",name:v,className:d()("block w-full rounded-md border-none",b().input,{[b().inputIconSpacing]:!!G}),disabled:!0,value:V})]})]}),(0,l.jsx)("div",{className:d()(b().spacing)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"rewardsPercentName",className:d()("block text-sm font-medium leading-6",b().inputLabel),children:u}),(0,l.jsx)("div",{className:"mt-2 rounded-md shadow-sm",children:(0,l.jsx)("input",{type:"text",name:"rewardsPercentName",className:d()("block w-full rounded-md border-none",b().input),disabled:!0,value:x})})]}),(0,l.jsx)("div",{className:d()(b().spacing)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"sharedRewardPercent",className:d()("block text-sm font-medium leading-6",b().inputLabel),children:"Shared Reward Percent"}),(0,l.jsx)("div",{className:"mt-2 rounded-md shadow-sm",children:(0,l.jsx)("input",{type:"text",name:"sharedRewardPercent",className:d()("block w-full rounded-md border-none",b().input),disabled:!0,value:$})})]}),(0,l.jsx)("div",{className:d()(b().spacing)}),(0,l.jsx)(h.Qr,{name:"delegateAmount",control:I,disabled:T,render:e=>{let{field:{onChange:t,value:n},fieldState:{error:a}}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"delegateAmount",className:d()("block text-sm font-medium leading-6",b().inputLabel),children:"Delegate Entangle AI Tokens"}),(0,l.jsxs)("div",{className:"relative mt-2 rounded-md shadow-sm",children:[(0,l.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:(0,l.jsx)("img",{className:b().delegateAvatarUrl,src:p.Z.src,alt:"Entangle AI Icon"})}),(0,l.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:(0,l.jsx)("button",{className:b().maxButton,type:"button",onClick:q,children:"Max"})}),(0,l.jsx)("input",{value:n,onChange:(0,D.W)(t),name:"delegateAmount",onClick:O,type:"text",className:d()("block w-full rounded-md border-none",b().input,b().inputIconSpacing,b().digitInput,a?b().inputError:void 0)})]}),a?.message&&a.message!==N.lK&&(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:b().inputErrorLabel,children:a.message})})]})}}),(0,l.jsx)("div",{children:(0,l.jsxs)("p",{className:b().delegateValue,children:["~$",E]})}),B?.delegateAmount?.message===N.lK&&(0,l.jsx)(w,{}),"Agent"!==v&&(0,l.jsxs)("div",{className:`${d()(b().infoTitle,b().infoTitleWarning)} mt-[24px] mb-[16px] flex justify-center items-center`,children:[(0,l.jsx)(C,{color:"#F4A408"}),(0,l.jsx)("div",{className:"text-[14px]",children:"Please note: Delegated $EAI tokens will begin a 21-day lock period upon undelegation."})]}),"Agent"===v&&(0,l.jsx)(S.default,{className:b().banner__link,href:"/wngl",children:"Convert EAI"}),(0,l.jsx)("button",{disabled:T,type:"submit",className:d()(b().submitButton,T?"cursor-not-allowed opacity-50":void 0),children:r?k:"Connect wallet"})]})});k.displayName="DelegateForm";var T=n(98176),E=n.n(T);let L={undelegateAmount:"0.00"},I=j.T.object().shape({undelegateAmount:j.T.string().test("undelegate-amount",N.N8,e=>{let t=Number(e);return!!e&&!!t&&t>0})}),F=(0,g.forwardRef)((e,t)=>{let{entity:n,balance:a,currentlyDelegated:s,isAuthenticated:r,onWalletConnect:i,price:o,onFormSubmit:u,entityName:x,rewards:w,onClaimRewardsClick:j,claimRewardsDisabled:N,disabled:y}=e,[_,C]=(0,g.useState)(f.w),{control:S,handleSubmit:k,setValue:T,setError:F,watch:U,reset:P}=(0,h.cI)({defaultValues:L,resolver:(0,c.X)(I)}),R=U("undelegateAmount"),{avatarUrl:B,name:M}=n,Z=e=>F("undelegateAmount",{message:e}),G=()=>{a&&T("undelegateAmount",s)},$=()=>C(Number(R)?(0,A.I)(new m.Z(R).multipliedBy(o).toString()):f.w),V=e=>{"value"in e.target&&e.target.value===L.undelegateAmount&&T("undelegateAmount","")};return(0,g.useImperativeHandle)(t,()=>({setUndelegateAmountError:Z,setError:F,reset:P})),(0,g.useEffect)(()=>{$()},[o,R]),(0,l.jsxs)("form",{className:d()(b().form,E().form),onSubmit:r?k(u):i,children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:b().onChainInfo,children:[(0,l.jsxs)("div",{className:b().onChainInputGroup,children:[(0,l.jsx)("label",{htmlFor:"Available",className:d()("block text-sm font-medium leading-6",b().inputLabel,b().onChainLabel),children:"Available $WNGL to delegate:"}),(0,l.jsx)("div",{className:"mt-2 rounded-md shadow-sm",children:(0,l.jsx)("input",{type:"text",name:"Available",className:d()("block w-full rounded-md border-none",b().input,b().onChainInput),disabled:!0,value:a})})]}),(0,l.jsxs)("div",{className:b().onChainInputGroup,children:[(0,l.jsx)("label",{htmlFor:"currentlyDelegated",className:d()("block text-sm font-medium leading-6",b().inputLabel,b().onChainLabel),children:"Currently Delegated:"}),(0,l.jsx)("div",{className:"mt-2 rounded-md shadow-sm",children:(0,l.jsx)("input",{type:"text",name:"currentlyDelegated",className:d()("block w-full rounded-md border-none",b().input,b().onChainInput),disabled:!0,value:s})})]})]}),(0,l.jsx)("div",{className:d()(b().spacing)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"rewards",className:d()("block text-sm font-medium leading-6",b().inputLabel),children:"Rewards"}),(0,l.jsxs)("div",{className:"relative mt-2 rounded-md shadow-sm",children:[(0,l.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:(0,l.jsx)("button",{disabled:N,className:d()(E().claimButton,N?"cursor-not-allowed opacity-50":void 0),type:"button",onClick:j,children:"Claim"})}),(0,l.jsx)("input",{type:"text",name:"rewards",className:d()("block w-full rounded-md border-none",b().input),disabled:!0,value:w.value})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("p",{className:b().delegateValue,children:["~$",w.price]})})]}),(0,l.jsx)("div",{className:d()(b().spacing)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:x,className:d()("block text-sm font-medium leading-6",b().inputLabel),children:x}),(0,l.jsxs)("div",{className:"relative mt-2 rounded-md shadow-sm",children:[(0,l.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:B&&(0,l.jsx)("img",{className:b().delegateAvatarUrl,src:B,alt:`${x} Icon`})}),(0,l.jsx)("input",{type:"text",name:x,className:d()("block w-full rounded-md border-none",b().input,{[b().inputIconSpacing]:!!B}),disabled:!0,value:M})]})]}),(0,l.jsx)("div",{className:d()(b().spacing)}),(0,l.jsx)(h.Qr,{name:"undelegateAmount",disabled:y,control:S,render:e=>{let{field:{value:t,onChange:n},fieldState:{error:a}}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"undelegateAmount",className:d()("block text-sm font-medium leading-6",b().inputLabel),children:"Undelegate Entangle AI Tokens"}),(0,l.jsxs)("div",{className:"relative mt-2 rounded-md shadow-sm",children:[(0,l.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:(0,l.jsx)("img",{className:b().delegateAvatarUrl,src:p.Z.src,alt:"Entangle AI Icon"})}),(0,l.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:(0,l.jsx)("button",{className:b().maxButton,onClick:G,type:"button",children:"Max"})}),(0,l.jsx)("input",{value:t,onChange:(0,D.W)(n),name:"undelegateAmount",type:"text",onClick:V,className:d()("block w-full rounded-md border-none",b().input,b().inputIconSpacing,b().digitInput,a?b().inputError:void 0)})]}),a?.message&&(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:b().inputErrorLabel,children:a.message})})]})}}),(0,l.jsx)("div",{children:(0,l.jsxs)("p",{className:b().delegateValue,children:["~$",_]})})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:b().info,children:[(0,l.jsxs)("div",{className:d()(b().infoTitle,b().infoTitleWarning),children:[(0,l.jsx)(v,{color:"#F4A408"}),(0,l.jsx)("h6",{children:"Your rewards for current round will be lost"})]}),(0,l.jsx)("button",{type:"submit",disabled:y,className:d()(b().submitButton,E().submitButton,y?"cursor-not-allowed opacity-50":void 0),children:r?"Undelegate":"Connect wallet"})]})})]})});F.displayName="UndelegateForm"},58863:function(e,t,n){"use strict";n.d(t,{w:function(){return a},z:function(){return s}});let a="0.00",s="--"},5383:function(e,t,n){"use strict";n.d(t,{W:function(){return a}});let a=e=>t=>{t.preventDefault();let n=t.target.value,a=[...[0,1,2,3,4,5,6,7,8,9].map(String),"."],s=n.split("").every(e=>a.includes(e));if(!(n.split(".").length>2||!s||n.startsWith(".")))return e({target:{value:n}})}},64726:function(e,t,n){"use strict";n.d(t,{M:function(){return c}});var a=n(57437),s=n(93946),l=n(2265),r=n(29822),i=n.n(r),o=n(82587),d=n(99376);let u=e=>{let{activeTab:t,onTabSelect:n,commonFormProps:s,onDelegateFormSubmit:l,delegateFormRef:r,delegateDisabled:d,delegateSubmitButtonName:u,delegateRewardsPercentName:c,delegateRewardsPercent:m,undelegateFormRef:g,undelegateDisabled:h,onUndelegateFormSubmit:p,undelegateRewards:f,undelegateOnClaimRewardsClick:x,undelegateClaimRewardsDisabled:b}=e;return(0,a.jsxs)("div",{className:i().modalContent,children:[(0,a.jsx)(o.A5,{activeTab:t,onTabSelect:n}),t===o.SP.Delegate&&(0,a.jsx)(o.ny,{...s,onFormSubmit:l,ref:r,rewardsPercentName:c,submitButtonName:u,disabled:d,rewardsPercent:m}),t===o.SP.UnDelegate&&(0,a.jsx)(o.gr,{...s,disabled:h,onFormSubmit:p,ref:g,rewards:f,onClaimRewardsClick:x,claimRewardsDisabled:b})]})},c=e=>{let{enable:t,onClose:n,...r}=e,o=(0,d.usePathname)(),c=(0,l.useMemo)(()=>{if(!o)return r.activeTab;let e=o.split("/"),t=e[e.length-1];return t?t?.includes("0x")||t?.length>12?e[e.length-2]:t:r.activeTab},[r.activeTab,o]);return(0,a.jsx)(s.ModalContainer,{enable:t,modalClassName:i().delegateDetailsModal,onClose:n,isCloseIcon:!0,title:c,titleClassName:i().delegateDetailsModalTitle,children:(0,a.jsx)(u,{...r})})}},563:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(Number.isNaN(Number(e)))return e;let[n,a]=e.split("."),s=a?.slice(0,t),l=s?.length,r=n.length;return`${n}.${s??"".padEnd(t,"0")}`.padEnd(r+1+(l<t?t:0),"0")}},75188:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});let a=n(34422)},90376:function(e,t,n){"use strict";function a(){return void 0!==document.hidden?!document.hidden:void 0!==document.msHidden?!document.msHidden:void 0!==document.webkitHidden?!document.webkitHidden:"hidden"!==document.visibilityState}n.d(t,{o:function(){return a}})},84155:function(e){e.exports={delegateButton:"DelegateButton_delegateButton__opqEK"}},46089:function(e){e.exports={votingPowerColumnData:"VotingPowerColumnData_votingPowerColumnData__iVuUL",votingPower:"VotingPowerColumnData_votingPower__q4wHQ"}},29822:function(e){e.exports={marginLeftMargin:"30px",delegateDetailsModal:"DelegateModal_delegateDetailsModal__MnURK",delegateDetailsModalTitle:"DelegateModal_delegateDetailsModalTitle__t6IbJ",modalContent:"DelegateModal_modalContent__iTycb"}},16240:function(e){e.exports={form:"DelegateForm_form__6lJFa",spacing:"DelegateForm_spacing__xNGay",inputLabel:"DelegateForm_inputLabel__PzMby",input:"DelegateForm_input__CTYaR",inputIconSpacing:"DelegateForm_inputIconSpacing__i4wPA",delegateAvatarUrl:"DelegateForm_delegateAvatarUrl__8rD47",submitButton:"DelegateForm_submitButton__y6rwa",inputError:"DelegateForm_inputError__RhTl9",inputErrorLabel:"DelegateForm_inputErrorLabel___Yg8n",digitInput:"DelegateForm_digitInput__4H7x2",delegateValue:"DelegateForm_delegateValue__6Aois",onChainInfo:"DelegateForm_onChainInfo__9ycB_",onChainInput:"DelegateForm_onChainInput__t7irW",onChainInputGroup:"DelegateForm_onChainInputGroup__DVDZw",onChainLabel:"DelegateForm_onChainLabel__bL9DR",maxButton:"DelegateForm_maxButton__SJIF8",info:"DelegateForm_info__0ftiN",infoTitle:"DelegateForm_infoTitle__IBi8Z",infoTitleError:"DelegateForm_infoTitleError__x4zi1",infoTitleWarning:"DelegateForm_infoTitleWarning__TxlWN",infoDescription:"DelegateForm_infoDescription__zyxx1",banner__link:"DelegateForm_banner__link__Ap7qh"}},89906:function(e){e.exports={tabs:"DelegateModalTabs_tabs__Py7h9",tabsList:"DelegateModalTabs_tabsList__8OfhU",tabsListItem:"DelegateModalTabs_tabsListItem__vUTjn",active:"DelegateModalTabs_active__fNU0W"}},98176:function(e){e.exports={claimButton:"UndelegateForm_claimButton__zssBy",submitButton:"UndelegateForm_submitButton__1kpRC",form:"UndelegateForm_form__TiD6G"}},98114:function(e,t){"use strict";t.Z={src:"/_next/static/media/copy.a26c1e34.svg",height:12,width:10,blurWidth:0,blurHeight:0}},83540:function(e,t){"use strict";t.Z={src:"/_next/static/media/entangle.8e7bd4e0.svg",height:16,width:16,blurWidth:0,blurHeight:0}}}]);